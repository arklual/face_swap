{"openapi":"3.1.0","info":{"title":"Face Transfer + WonderWraps API","description":"Скомбинированная OpenAPI-спека двух подсистем:ыфы\n1) Face Transfer API — перенос лица ребёнка на иллюстрации.\n2) WonderWraps API — SPA-бэкенд для каталога книг, персонализаций, корзины и заказов.","version":"1.0.1"},"paths":{"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Health check endpoint","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/version":{"get":{"tags":["Health"],"summary":"Get Version","description":"Get API version","operationId":"get_version_version_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/auth/signup":{"post":{"tags":["Auth"],"summary":"Signup","description":"Register a new customer","operationId":"signup_auth_signup_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignupRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/login":{"post":{"tags":["Auth"],"summary":"Login","description":"Login to existing account","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/logout":{"post":{"tags":["Auth"],"summary":"Logout","description":"Logout from account","operationId":"logout_auth_logout_post","responses":{"204":{"description":"Successful Response"}},"security":[{"bearerAuth":[]}]}},"/auth/forgot-password":{"post":{"tags":["Auth"],"summary":"Forgot Password","description":"Request password reset","operationId":"forgot_password_auth_forgot_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ForgotPasswordRequest"}}},"required":true},"responses":{"202":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/reset-password":{"post":{"tags":["Auth"],"summary":"Reset Password","description":"Reset password using token","operationId":"reset_password_auth_reset_password_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPasswordRequest"}}},"required":true},"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/books":{"get":{"tags":["Catalog"],"summary":"Get Books","description":"Get list of books with search and filters","operationId":"get_books_books_get","parameters":[{"name":"search","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Search"}},{"name":"category","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Category"}},{"name":"ageRange","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Agerange"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"default":20,"title":"Limit"}},{"name":"cursor","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cursor"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/books/highlights":{"get":{"tags":["Catalog"],"summary":"Get Book Highlights","description":"Get book highlights for homepage carousels","operationId":"get_book_highlights_books_highlights_get","parameters":[{"name":"section","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Section"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookHighlightsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/books/{slug}":{"get":{"tags":["Catalog"],"summary":"Get Book","description":"Get detailed book information","operationId":"get_book_books__slug__get","parameters":[{"name":"slug","in":"path","required":true,"schema":{"type":"string","title":"Slug"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookDetail"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/books/{slug}/related":{"get":{"tags":["Catalog"],"summary":"Get Related Books","description":"Get recommended books","operationId":"get_related_books_books__slug__related_get","parameters":[{"name":"slug","in":"path","required":true,"schema":{"type":"string","title":"Slug"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RelatedBooksResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/books/{slug}/previews":{"get":{"tags":["Catalog"],"summary":"Get Book Previews","description":"Get preview pages for a book","operationId":"get_book_previews_books__slug__previews_get","parameters":[{"name":"slug","in":"path","required":true,"schema":{"type":"string","title":"Slug"}},{"name":"personalizationId","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Personalizationid"}},{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/upload_and_analyze/":{"post":{"tags":["Personalizations"],"summary":"Upload And Analyze","description":"Create personalization and start photo analysis","operationId":"upload_and_analyze_upload_and_analyze__post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_and_analyze_upload_and_analyze__post"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Personalization"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/status/{job_id}":{"get":{"tags":["Personalizations"],"summary":"Get Personalization Status","description":"Get personalization status","operationId":"get_personalization_status_status__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Personalization"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/result/{job_id}":{"get":{"tags":["Personalizations"],"summary":"Get Personalization Preview","description":"Get personalized preview for completed job.\n\nReturns book preview pages (without thumbnails) with generated images substituted when available.","operationId":"get_personalization_preview_result__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/preview/{job_id}":{"get":{"tags":["Personalizations"],"summary":"Get Personalization Preview Stage","description":"Manifest-driven preview endpoint.\n\n- stage=prepay: returns only page_01 and page_02\n- stage=postpay: returns all pages allowed by manifest (requires job completed)","operationId":"get_personalization_preview_stage_preview__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}},{"name":"stage","in":"query","required":false,"schema":{"type":"string","pattern":"^(prepay|postpay)$","default":"prepay","title":"Stage"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PreviewResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/jobs":{"get":{"tags":["Personalizations"],"summary":"List Personalization Jobs","description":"List all personalization jobs for the authenticated user","operationId":"list_personalization_jobs_jobs_get","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Personalization"},"title":"Response List Personalization Jobs Jobs Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/avatar/{job_id}":{"post":{"tags":["Personalizations"],"summary":"Upload Personalization Avatar","description":"Upload or replace avatar for personalization","operationId":"upload_personalization_avatar_avatar__job_id__post","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_upload_personalization_avatar_avatar__job_id__post"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvatarUploadResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/generate/":{"post":{"tags":["Personalizations"],"summary":"Confirm Personalization Generate","description":"Confirm personalization and add to cart","operationId":"confirm_personalization_generate_generate__post","parameters":[{"name":"authorization","in":"header","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Authorization"}}],"requestBody":{"required":true,"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_confirm_personalization_generate_generate__post"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cancel/{job_id}":{"post":{"tags":["Personalizations"],"summary":"Cancel Personalization","description":"Cancel personalization","operationId":"cancel_personalization_cancel__job_id__post","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/illustrations/":{"get":{"tags":["Personalizations"],"summary":"Get Illustrations","description":"Get list of available illustrations","operationId":"get_illustrations_illustrations__get","parameters":[{"name":"gender","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Gender"}},{"name":"age","in":"query","required":false,"schema":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Age"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/illustrations/{illustration_id}":{"get":{"tags":["Personalizations"],"summary":"Get Illustration","description":"Get specific illustration","operationId":"get_illustration_illustrations__illustration_id__get","parameters":[{"name":"illustration_id","in":"path","required":true,"schema":{"type":"string","title":"Illustration Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/cart":{"get":{"tags":["Cart"],"summary":"Get Cart","description":"Get current cart","operationId":"get_cart_cart_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Cart"}}}}},"security":[{"bearerAuth":[]}]}},"/cart/items":{"post":{"tags":["Cart"],"summary":"Add To Cart","description":"Add personalization to cart","operationId":"add_to_cart_cart_items_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartItemInput"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Cart"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"bearerAuth":[]}]}},"/cart/items/{itemId}":{"patch":{"tags":["Cart"],"summary":"Update Cart Item","description":"Update cart item quantity","operationId":"update_cart_item_cart_items__itemId__patch","security":[{"bearerAuth":[]}],"parameters":[{"name":"itemId","in":"path","required":true,"schema":{"type":"string","title":"Itemid"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CartItemUpdateRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Cart"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Cart"],"summary":"Remove From Cart","description":"Remove item from cart","operationId":"remove_from_cart_cart_items__itemId__delete","security":[{"bearerAuth":[]}],"parameters":[{"name":"itemId","in":"path","required":true,"schema":{"type":"string","title":"Itemid"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/checkout/shipping-methods":{"get":{"tags":["Cart"],"summary":"Get Shipping Methods","description":"Get available shipping methods","operationId":"get_shipping_methods_checkout_shipping_methods_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ShippingMethod"},"type":"array","title":"Response Get Shipping Methods Checkout Shipping Methods Get"}}}}},"security":[{"bearerAuth":[]}]}},"/checkout/quote":{"post":{"tags":["Cart"],"summary":"Get Checkout Quote","description":"Calculate checkout totals","operationId":"get_checkout_quote_checkout_quote_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckoutQuoteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckoutQuoteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"bearerAuth":[]}]}},"/checkout/orders":{"post":{"tags":["Orders"],"summary":"Create Order","description":"Create order from cart","operationId":"create_order_checkout_orders_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateOrderRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Order"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"bearerAuth":[]}]}},"/orders/{orderId}/mark_paid":{"post":{"tags":["Orders"],"summary":"Mark Order Paid","description":"Mark order as paid (processing) and trigger postpay generation.\n\nThis is an internal-ish endpoint to bridge payment integration: when the payment system\nconfirms payment, it should call this endpoint (or an equivalent status update) so the\nbackend can start postpay generation.","operationId":"mark_order_paid_orders__orderId__mark_paid_post","security":[{"bearerAuth":[]}],"parameters":[{"name":"orderId","in":"path","required":true,"schema":{"type":"string","title":"Orderid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Order"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/orders":{"get":{"tags":["Orders"],"summary":"Get Orders","description":"Get list of customer orders","operationId":"get_orders_orders_get","security":[{"bearerAuth":[]}],"parameters":[{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":50,"minimum":1,"default":20,"title":"Limit"}},{"name":"cursor","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cursor"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/orders/{orderId}":{"get":{"tags":["Orders"],"summary":"Get Order","description":"Get order details","operationId":"get_order_orders__orderId__get","security":[{"bearerAuth":[]}],"parameters":[{"name":"orderId","in":"path","required":true,"schema":{"type":"string","title":"Orderid"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Order"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/account/profile":{"get":{"tags":["Account"],"summary":"Get Profile","description":"Get customer profile","operationId":"get_profile_account_profile_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}}},"security":[{"bearerAuth":[]}]},"put":{"tags":["Account"],"summary":"Update Profile","description":"Update customer profile","operationId":"update_profile_account_profile_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfileUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"bearerAuth":[]}]}}},"components":{"schemas":{"Address":{"properties":{"firstName":{"type":"string","title":"Firstname"},"lastName":{"type":"string","title":"Lastname"},"company":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Company"},"line1":{"type":"string","title":"Line1"},"line2":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Line2"},"city":{"type":"string","title":"City"},"region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region"},"postalCode":{"type":"string","title":"Postalcode"},"countryCode":{"type":"string","title":"Countrycode"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"}},"type":"object","required":["firstName","lastName","line1","city","postalCode","countryCode"],"title":"Address"},"AuthResponse":{"properties":{"token":{"type":"string","title":"Token"},"user":{"$ref":"#/components/schemas/UserProfile"}},"type":"object","required":["token","user"],"title":"AuthResponse"},"AvatarUploadResponse":{"properties":{"uploadId":{"type":"string","title":"Uploadid"},"expiresAt":{"type":"string","format":"date-time","title":"Expiresat"}},"type":"object","required":["uploadId","expiresAt"],"title":"AvatarUploadResponse"},"Body_confirm_personalization_generate_generate__post":{"properties":{"job_id":{"type":"string","title":"Job Id"},"child_name":{"type":"string","title":"Child Name"},"child_age":{"type":"integer","title":"Child Age"}},"type":"object","required":["job_id","child_name","child_age"],"title":"Body_confirm_personalization_generate_generate__post"},"Body_upload_and_analyze_upload_and_analyze__post":{"properties":{"slug":{"type":"string","title":"Slug"},"child_photo":{"type":"string","format":"binary","title":"Child Photo"},"illustration_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Illustration Id"}},"type":"object","required":["slug","child_photo"],"title":"Body_upload_and_analyze_upload_and_analyze__post"},"Body_upload_personalization_avatar_avatar__job_id__post":{"properties":{"file":{"type":"string","format":"binary","title":"File"}},"type":"object","required":["file"],"title":"Body_upload_personalization_avatar_avatar__job_id__post"},"BookDetail":{"properties":{"slug":{"type":"string","title":"Slug"},"title":{"type":"string","title":"Title"},"subtitle":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subtitle"},"heroImage":{"type":"string","title":"Heroimage"},"ageRange":{"type":"string","title":"Agerange"},"category":{"type":"string","title":"Category"},"price":{"$ref":"#/components/schemas/Money"},"compareAtPrice":{"anyOf":[{"$ref":"#/components/schemas/Money"},{"type":"null"}]},"discountPercent":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Discountpercent"},"tags":{"items":{"$ref":"#/components/schemas/BookTag"},"type":"array","title":"Tags","default":[]},"description":{"type":"string","title":"Description"},"descriptionSecondary":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Descriptionsecondary"},"bullets":{"items":{"type":"string"},"type":"array","title":"Bullets"},"galleryImages":{"items":{"type":"string"},"type":"array","title":"Galleryimages"},"specs":{"$ref":"#/components/schemas/BookSpecs"}},"type":"object","required":["slug","title","heroImage","ageRange","category","price","description","bullets","galleryImages","specs"],"title":"BookDetail"},"BookHighlightsResponse":{"properties":{"sections":{"items":{"$ref":"#/components/schemas/HighlightSection"},"type":"array","title":"Sections"}},"type":"object","required":["sections"],"title":"BookHighlightsResponse"},"BookListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/BookSummary"},"type":"array","title":"Data"},"meta":{"$ref":"#/components/schemas/PaginationMeta"}},"type":"object","required":["data","meta"],"title":"BookListResponse"},"BookSpecs":{"properties":{"idealFor":{"type":"string","title":"Idealfor"},"ageRange":{"type":"string","title":"Agerange"},"characters":{"type":"string","title":"Characters"},"genre":{"type":"string","title":"Genre"},"pages":{"type":"string","title":"Pages"},"shipping":{"type":"string","title":"Shipping"}},"type":"object","required":["idealFor","ageRange","characters","genre","pages","shipping"],"title":"BookSpecs"},"BookSummary":{"properties":{"slug":{"type":"string","title":"Slug"},"title":{"type":"string","title":"Title"},"subtitle":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Subtitle"},"heroImage":{"type":"string","title":"Heroimage"},"ageRange":{"type":"string","title":"Agerange"},"category":{"type":"string","title":"Category"},"price":{"$ref":"#/components/schemas/Money"},"compareAtPrice":{"anyOf":[{"$ref":"#/components/schemas/Money"},{"type":"null"}]},"discountPercent":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Discountpercent"},"tags":{"items":{"$ref":"#/components/schemas/BookTag"},"type":"array","title":"Tags","default":[]}},"type":"object","required":["slug","title","heroImage","ageRange","category","price"],"title":"BookSummary"},"BookTag":{"properties":{"label":{"type":"string","title":"Label"},"tone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Tone"}},"type":"object","required":["label"],"title":"BookTag"},"Cart":{"properties":{"id":{"type":"string","title":"Id"},"currency":{"type":"string","title":"Currency"},"items":{"items":{"$ref":"#/components/schemas/CartItem"},"type":"array","title":"Items"},"totals":{"$ref":"#/components/schemas/CartTotals"},"updatedAt":{"type":"string","format":"date-time","title":"Updatedat"}},"type":"object","required":["id","currency","items","totals","updatedAt"],"title":"Cart"},"CartItem":{"properties":{"id":{"type":"string","title":"Id"},"slug":{"type":"string","title":"Slug"},"title":{"type":"string","title":"Title"},"personalization":{"$ref":"#/components/schemas/CartPersonalizationSummary"},"quantity":{"type":"integer","title":"Quantity"},"unitPrice":{"$ref":"#/components/schemas/Money"},"lineTotal":{"$ref":"#/components/schemas/Money"},"previewImage":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Previewimage"}},"type":"object","required":["id","slug","title","personalization","quantity","unitPrice","lineTotal"],"title":"CartItem"},"CartItemInput":{"properties":{"personalizationId":{"type":"string","title":"Personalizationid"},"quantity":{"type":"integer","minimum":1.0,"title":"Quantity"}},"type":"object","required":["personalizationId","quantity"],"title":"CartItemInput"},"CartItemUpdateRequest":{"properties":{"quantity":{"type":"integer","minimum":1.0,"title":"Quantity"}},"type":"object","required":["quantity"],"title":"CartItemUpdateRequest"},"CartPersonalizationSummary":{"properties":{"childName":{"type":"string","title":"Childname"},"childAge":{"type":"integer","title":"Childage"}},"type":"object","required":["childName","childAge"],"title":"CartPersonalizationSummary"},"CartTotals":{"properties":{"subtotal":{"$ref":"#/components/schemas/Money"},"discountTotal":{"$ref":"#/components/schemas/Money"},"taxTotal":{"$ref":"#/components/schemas/Money"},"shippingTotal":{"$ref":"#/components/schemas/Money"},"grandTotal":{"$ref":"#/components/schemas/Money"}},"type":"object","required":["subtotal","discountTotal","taxTotal","shippingTotal","grandTotal"],"title":"CartTotals"},"CheckoutQuoteRequest":{"properties":{"cartId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cartid"},"shippingAddress":{"$ref":"#/components/schemas/Address"},"shippingMethodId":{"type":"string","title":"Shippingmethodid"},"promoCode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Promocode"}},"type":"object","required":["shippingAddress","shippingMethodId"],"title":"CheckoutQuoteRequest"},"CheckoutQuoteResponse":{"properties":{"cartId":{"type":"string","title":"Cartid"},"totals":{"$ref":"#/components/schemas/CartTotals"},"shippingMethod":{"$ref":"#/components/schemas/ShippingMethod"}},"type":"object","required":["cartId","totals","shippingMethod"],"title":"CheckoutQuoteResponse"},"CreateOrderRequest":{"properties":{"cartId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cartid"},"shippingAddress":{"$ref":"#/components/schemas/Address"},"billingAddress":{"anyOf":[{"$ref":"#/components/schemas/Address"},{"type":"null"}]},"shippingMethodId":{"type":"string","title":"Shippingmethodid"},"payment":{"$ref":"#/components/schemas/PaymentInput"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"}},"type":"object","required":["shippingAddress","shippingMethodId","payment"],"title":"CreateOrderRequest"},"ForgotPasswordRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"}},"type":"object","required":["email"],"title":"ForgotPasswordRequest"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HighlightSection":{"properties":{"key":{"type":"string","title":"Key"},"title":{"type":"string","title":"Title"},"ctaLabel":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Ctalabel"},"items":{"items":{"$ref":"#/components/schemas/BookSummary"},"type":"array","title":"Items"}},"type":"object","required":["key","title","items"],"title":"HighlightSection"},"LoginRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["email","password"],"title":"LoginRequest"},"Money":{"properties":{"amount":{"type":"number","title":"Amount"},"currency":{"type":"string","title":"Currency"}},"type":"object","required":["amount","currency"],"title":"Money"},"Order":{"properties":{"id":{"type":"string","title":"Id"},"number":{"type":"string","title":"Number"},"status":{"type":"string","title":"Status"},"placedAt":{"type":"string","format":"date-time","title":"Placedat"},"currency":{"type":"string","title":"Currency"},"totals":{"$ref":"#/components/schemas/CartTotals"},"items":{"items":{"$ref":"#/components/schemas/OrderItem"},"type":"array","title":"Items"},"shippingAddress":{"$ref":"#/components/schemas/Address"},"billingAddress":{"anyOf":[{"$ref":"#/components/schemas/Address"},{"type":"null"}]},"shippingMethod":{"$ref":"#/components/schemas/ShippingMethod"},"personalizationPreviews":{"items":{"$ref":"#/components/schemas/PreviewPage"},"type":"array","title":"Personalizationpreviews","default":[]}},"type":"object","required":["id","number","status","placedAt","currency","totals","items","shippingAddress","shippingMethod"],"title":"Order"},"OrderItem":{"properties":{"id":{"type":"string","title":"Id"},"slug":{"type":"string","title":"Slug"},"title":{"type":"string","title":"Title"},"quantity":{"type":"integer","title":"Quantity"},"unitPrice":{"$ref":"#/components/schemas/Money"},"lineTotal":{"$ref":"#/components/schemas/Money"},"personalization":{"$ref":"#/components/schemas/CartPersonalizationSummary"}},"type":"object","required":["id","slug","title","quantity","unitPrice","lineTotal","personalization"],"title":"OrderItem"},"OrderListResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/OrderSummary"},"type":"array","title":"Data"},"meta":{"$ref":"#/components/schemas/PaginationMeta"}},"type":"object","required":["data","meta"],"title":"OrderListResponse"},"OrderSummary":{"properties":{"id":{"type":"string","title":"Id"},"number":{"type":"string","title":"Number"},"status":{"type":"string","title":"Status"},"placedAt":{"type":"string","format":"date-time","title":"Placedat"},"total":{"$ref":"#/components/schemas/Money"}},"type":"object","required":["id","number","status","placedAt","total"],"title":"OrderSummary"},"PaginationMeta":{"properties":{"total":{"type":"integer","title":"Total"},"limit":{"type":"integer","title":"Limit"},"nextCursor":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Nextcursor"}},"type":"object","required":["total","limit"],"title":"PaginationMeta"},"PaymentInput":{"properties":{"provider":{"type":"string","pattern":"^(stripe|paypal|test)$","title":"Provider"},"token":{"type":"string","title":"Token"},"savePaymentMethod":{"type":"boolean","title":"Savepaymentmethod","default":false}},"type":"object","required":["provider","token"],"title":"PaymentInput"},"Personalization":{"properties":{"id":{"type":"string","title":"Id"},"slug":{"type":"string","title":"Slug"},"childName":{"type":"string","title":"Childname"},"childAge":{"type":"integer","title":"Childage"},"status":{"type":"string","title":"Status"},"createdAt":{"type":"string","format":"date-time","title":"Createdat"},"updatedAt":{"type":"string","format":"date-time","title":"Updatedat"},"previewReadyAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Previewreadyat"},"avatarUrl":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatarurl"},"preview":{"anyOf":[{"$ref":"#/components/schemas/PreviewResponse"},{"type":"null"}]},"cartItemId":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cartitemid"}},"type":"object","required":["id","slug","childName","childAge","status","createdAt","updatedAt"],"title":"Personalization"},"PreviewPage":{"properties":{"index":{"type":"integer","title":"Index"},"imageUrl":{"type":"string","title":"Imageurl"},"locked":{"type":"boolean","title":"Locked"},"caption":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Caption"}},"type":"object","required":["index","imageUrl","locked"],"title":"PreviewPage"},"PreviewResponse":{"properties":{"pages":{"items":{"$ref":"#/components/schemas/PreviewPage"},"type":"array","title":"Pages"},"unlockedCount":{"type":"integer","title":"Unlockedcount"},"totalCount":{"type":"integer","title":"Totalcount"}},"type":"object","required":["pages","unlockedCount","totalCount"],"title":"PreviewResponse"},"RelatedBooksResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/BookSummary"},"type":"array","title":"Data"}},"type":"object","required":["data"],"title":"RelatedBooksResponse"},"ResetPasswordRequest":{"properties":{"token":{"type":"string","title":"Token"},"password":{"type":"string","minLength":8,"title":"Password"}},"type":"object","required":["token","password"],"title":"ResetPasswordRequest"},"ShippingMethod":{"properties":{"id":{"type":"string","title":"Id"},"label":{"type":"string","title":"Label"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"amount":{"$ref":"#/components/schemas/Money"},"estimatedDaysMin":{"type":"integer","title":"Estimateddaysmin"},"estimatedDaysMax":{"type":"integer","title":"Estimateddaysmax"}},"type":"object","required":["id","label","amount","estimatedDaysMin","estimatedDaysMax"],"title":"ShippingMethod"},"SignupRequest":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","minLength":8,"title":"Password"},"firstName":{"type":"string","title":"Firstname"},"lastName":{"type":"string","title":"Lastname"}},"type":"object","required":["email","password","firstName","lastName"],"title":"SignupRequest"},"UserProfile":{"properties":{"id":{"type":"string","title":"Id"},"email":{"type":"string","format":"email","title":"Email"},"firstName":{"type":"string","title":"Firstname"},"lastName":{"type":"string","title":"Lastname"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"}},"type":"object","required":["id","email","firstName","lastName"],"title":"UserProfile"},"UserProfileUpdate":{"properties":{"firstName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Firstname"},"lastName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Lastname"},"phone":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phone"}},"type":"object","title":"UserProfileUpdate"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"JWT авторизация, используемая для всех защищённых методов."}}},"servers":[{"url":"http://localhost:8000","description":"Локальная / dev среда (docker compose)"}]}